<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>关于 Minecraft 服务器安全防护建议 | 人间工作P</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="icon" href="/img/favicon.ico">
    <meta name="description" content="开服两年以来的安全经验总结">
    <meta name="keywords" content="个人技术博客,技术文档,人间工作P,人间工作,kotlin,java,csharp,c#,python,git,github,markdown">
    <meta name="baidu-site-verification" content="codeva-o8iMAsmwkT">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/assets/css/0.styles.1d5da9ac.css" as="style"><link rel="preload" href="/assets/js/app.8383ec1a.js" as="script"><link rel="preload" href="/assets/js/2.1586014b.js" as="script"><link rel="preload" href="/assets/js/17.9a097336.js" as="script"><link rel="prefetch" href="/assets/js/10.bcfbcf75.js"><link rel="prefetch" href="/assets/js/11.8f6efe05.js"><link rel="prefetch" href="/assets/js/12.f9f06bef.js"><link rel="prefetch" href="/assets/js/13.b54fa231.js"><link rel="prefetch" href="/assets/js/14.01d30ad3.js"><link rel="prefetch" href="/assets/js/15.a83ecc7f.js"><link rel="prefetch" href="/assets/js/16.1f5e94f3.js"><link rel="prefetch" href="/assets/js/18.478f8662.js"><link rel="prefetch" href="/assets/js/19.3b0490a8.js"><link rel="prefetch" href="/assets/js/20.7374822a.js"><link rel="prefetch" href="/assets/js/21.8b6fd980.js"><link rel="prefetch" href="/assets/js/3.83f1b7ad.js"><link rel="prefetch" href="/assets/js/4.29d7e6cf.js"><link rel="prefetch" href="/assets/js/5.2a3dbd37.js"><link rel="prefetch" href="/assets/js/6.410db86a.js"><link rel="prefetch" href="/assets/js/7.33cd613d.js"><link rel="prefetch" href="/assets/js/8.f417068c.js"><link rel="prefetch" href="/assets/js/9.246d437e.js">
    <link rel="stylesheet" href="/assets/css/0.styles.1d5da9ac.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/logo.png" alt="人间工作P" class="logo"> <span class="site-name can-hide">人间工作P</span></a> <div class="links"><nav class="nav-links can-hide"><div class="nav-item"><a href="https://www.mrxiaom.top" target="_blank" rel="noopener noreferrer" class="nav-link external">
  主站
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="系列" class="dropdown-title"><!----> <span class="title" style="display:;">系列</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/?category=Bukkit%E5%BC%80%E5%8F%91%E6%95%99%E7%A8%8B&amp;.html" class="nav-link">Bukkit开发教程</a></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/MrXiaoM/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="https://static.mcio.dev/mrxiaom.top/images/avatar-new.jpg"> <div class="blogger-info"><h3>人间工作P</h3> <span>我每天都好困… 最近在学习和进行 VOCALOID 创作</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="https://www.mrxiaom.top" target="_blank" rel="noopener noreferrer" class="nav-link external">
  主站
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="系列" class="dropdown-title"><!----> <span class="title" style="display:;">系列</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/?category=Bukkit%E5%BC%80%E5%8F%91%E6%95%99%E7%A8%8B&amp;.html" class="nav-link">Bukkit开发教程</a></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/MrXiaoM/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>关于 Minecraft 服务器安全防护建议</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/post/mc-cyber-security/#远程桌面安全" class="sidebar-link">远程桌面安全</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/post/mc-cyber-security/#防火墙安全" class="sidebar-link">防火墙安全</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/post/mc-cyber-security/#游戏密码" class="sidebar-link">游戏密码</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/post/mc-cyber-security/#玩家账号安全" class="sidebar-link">玩家账号安全</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/post/mc-cyber-security/#内容审查安全" class="sidebar-link">内容审查安全</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/post/mc-cyber-security/#管理员权限安全" class="sidebar-link">管理员权限安全</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/post/mc-cyber-security/#插件安全" class="sidebar-link">插件安全</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/post/mc-cyber-security/#尾声" class="sidebar-link">尾声</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><!----> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="https://www.mrxiaom.top" target="_blank" title="作者" class="beLink" data-v-06225672>MrXiaoM</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2025-01-13</a></div> <div title="分类" class="date iconfont icon-wenjian" data-v-06225672><a href="/categories/?category=Minecraft" data-v-06225672>Minecraft </a></div></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABH1JREFUSA3tVl1oHFUUPmdmd2ltklqbpJDiNnXFmgbFktho7YMPNiJSSZM0+CAYSkUELVhM6YuwIPpgoOKDqOBDC0XE2CQoNtQXBUFTTcCi+Wlh1V2TQExsUzcltd3M9Tt3ZjZzZ2fT+OJTL8yeM+eee757fmeJbq//KQL8X3DUSFOcfr7cRsRtxNQMWueeVzOkaITIGqQHNg5y8+jNW9ldM7A6nTpAjuolUikAwq7CE3WcM2RRDz+XGVgN3FptU/aUSlvq9Pa3iZ1+sgAqJyyAFqkipd9dqiwHF3P65YycLWc/6sqGrvoEoIp6DOFaX5h6+dnfjkWprwqsPk0dUGq5vySwDImC10KxFHgGL1SWoc92O3eVht09qdXNH11I2SsTsJYqMWzihqGMi+A+Garf3BAuuLI5oGlULyNfyB/HYNujwktOfRrMr5t77NmevqaUopx0grnKAyvVpmwUDB4x6FPXuGvYLTDwWsejwgtgkYKPqRJg8SV6xaiZ3ZTppGneS4yfH5/66fZSDHv+QZci/+h5c5UHtpy67JUqGppM0sh0Nc1dW6/N1W5Yoqat8/TU/VnadmdeW2PLLSyh0cvxBs3KbqTmwYPpxN4do/mzE8nEpvX/UMu2Wbp74zUAK5q6WkHns7V0eWkdPbPzd3rxkTGybadYySumVzhcaJFbs5UrEkQ/+CK8gF5dnh/6ciIZ73gwQ927L1IitoxKLXYP3SjYdOrHHfTZhRRlFyrorafPk20B3HPD1y2G3qKZME5Jcf3t/HUC13/8tSd++vqFveMUTwAUxSUFI1QekR1+bIze3D9MF2aq6cPvG72CgnldWCFqyRw3lwH8ZMerjTD9ElRO7Gv44wNpC90aASqGfVlz/Rx17srQ57/UU26hkhQqUB7dBR71WmzQhHUnblGmVOEw0jhbV1n9OlXUDCIRGaNV5Jp43N516fN7JmnTHdfp7Hgy0luO4aMhtkLL8Bi3bUWYvzh5Mn1dTxrL6QmGuRhGL/TiTTxRoEdTszSaq9GR0NGA3KdkOz3hqSV3MIDhQ5IVX/Ivx3umBti2es2h4eZby7x8br1rkf7Mo90AqC8aQ3sJeNzqFRu+vSANAQe3PL7l0HGOAdwDCeZYvNKeoZp1Qfs6Aipndh86HmFRi0LAnEO47wsqM6cdfjh3jBPUzhZy7nvlUfFsamED1VQt6aISHVymXZ/B2aCtIG8AI8xfobj2d3en1wWVhOeHELKmLQ1s211s88comkv4UCwWyF787mJdYXtNfhKAXVqnKTq8QZvGAGGOfaTo5pGZ/PwbUCr5+DPr/1J92JNHr9aOl/F3iI5+O1nfybsGxoimvZ3ViWSluDITw3P37mypheDIPY0tw7+O/5ApbkYw+zpfaUVu32Pi98+defdUhEpZkRFq0aqyNh9FuL9hpYbEm6iwi0z2REd09ZmyENEbuhjDWzKvZXTqKYaBIr3tt5kuPtQBZFvEUwHt60vfCNu41XsksH9Ij1BMMz1Y0OOunHNShFIP5868g5zeXmuLwL9T4b6Q2+KejgAAAABJRU5ErkJggg==">关于 Minecraft 服务器安全防护建议<!----></h1> <blockquote>
          开服两年以来的安全经验总结
        </blockquote>  <div class="theme-vdoing-content content__default"><p>DDoS 防护方面已在我的<a href="https://producer.mrxiaom.top/post/mc-ddos" target="_blank" rel="noopener noreferrer">上一篇博文<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>中进行过讲解，在此不过多讲述。<br>
分享一个排除法：你可以额外租一些节点给一部分信得过的已付费玩家使用，在遭受攻击后，如果某些给付费玩家的节点出了问题，那么内鬼大概率就在这些玩家之中。</p> <p>这篇博文主要讲讲在账号安全方面的一些建议，想到什么就写什么，可能有点乱。</p> <h2 id="远程桌面安全"><a href="#远程桌面安全" class="header-anchor">#</a> 远程桌面安全</h2> <p>尽量不使用默认的 3389 作为 Windows 远程桌面端口。如果你想起到简单的迷惑作用，Linux 将 <code>SSH</code> 端口改为 <code>3389</code>，Windows 将 <code>RDP</code> 远程桌面端口改为 <code>22</code> (笑)。</p> <p>远程桌面是需要重点防护的对象之一，有以下情况会让黑客闻着味就来破解你的远程桌面</p> <ul><li>国内或国外的黑客广撒网，扫描整个IP段的特殊端口是否开启</li> <li>特别的个人或团体，比如你服务器里的玩家，动歪心思试试有没有用</li> <li>有人看到你端口开着，闲着没事来看看</li></ul> <p>登录 RDP 或 SSH，需要两个要素，<code>用户名</code>和<code>密码</code>。黑客通常会尝试使用 <code>Administrator</code>、<code>root</code> 等默认用户名，使用来自世界各地的肉鸡来尝试暴力破解你的远程桌面。更有甚者，比如你的服务器玩家，可能还会尝试你(服务器管理员)的玩家名。</p> <p>我的建议是，不要启用 <code>Administrator</code> 和 <code>root</code> 账户的远程登录权限。自己建一个账户，名字尽可能奇怪，给予自己管理员权限，使用这个账户来进行日常运维活动。</p> <p>不要在服务器上运行来源不明的任何软件，包括服务端插件。</p> <p>服务端核心应当运行在一个普通账户下，这个账户只有Java和服务端目录的权限，以免插件或服务端出现远程执行后门或漏洞时出现更大的损失。</p> <p>黑客不知道你的账户名，那么他们暴力破解服务器远程桌面的难度就指数级增加了，即使知道你的远程桌面开在哪个端口，在有生之年内无法穷举出所有的用户名和密码组合。</p> <p>说到密码，大厂的网络安全事故都层出不穷，有很多次密码泄露事件，所以建议不要使用你的社交账号密码作为远程桌面的密码。目前我服务器的远程密码是随机生成的，使用了包括但不限于字母、数字、特殊符号，长度保密。你问我怎么记住这个密码？我的建议是不记。我有一个远程桌面管理软件，可以管理 RDP 会话，数据存在本地，顺便放到了U盘和移动硬盘里进行备份，只要软件还在我的电脑上，我就能访问远程桌面。</p> <p>推荐一个远程桌面防护工具，Windows 使用 <a href="https://gitee.com/iamverygood/fail2ban-win" target="_blank" rel="noopener noreferrer">fail2ban-win<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，Linux 使用 <a href="https://github.com/fail2ban/fail2ban" target="_blank" rel="noopener noreferrer">fail2ban<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，可以自动封禁尝试登录错误次数过多的 IP 地址。</p> <h2 id="防火墙安全"><a href="#防火墙安全" class="header-anchor">#</a> 防火墙安全</h2> <p>对于暴露在公网中的服务器，必须要开启防火墙，只对外开启必要的端口。以免有心人利用漏洞入侵服务器造成不必要的损失。</p> <h2 id="游戏密码"><a href="#游戏密码" class="header-anchor">#</a> 游戏密码</h2> <p>目前我服务器是群组服，使用 Waterfall 作群组核心，禁用 Waterfall 的所有命令和权限，在登录服安装 AuthMeReloaded 作为登录插件。</p> <p>登录插件有两种，一种是单个子服的，也就是在登录服安装登录插件，有个缺点就是玩太久之后突然回登录服会要求重新登录。<br>
另一种是装在群组核心的，你没通过登录验证就不能进行任何操作，这种形式更新、更好，还可以防止还没通过登录验证就传送出登录服的问题。
关于 BungeeCord 和 Velocity，我的建议是你习惯用哪个就用哪个，尽管 Paper 将 Velocity 吹得天花乱坠，但我并不习惯它的 toml 配置，以及我需要的插件没有 Velocity 版本，所以依然在用 BungeeCord。<br>
简单来说，因为我的个人习惯，以及目前架构 (BungeeCord+登录服+登录插件) 虽然过时，但已经相当稳定了，我没有必要冒这个风险去升级到 Velocity。稳定远比性能更重要。</p> <p>说回登录密码。</p> <p>为了方便起见，一般来说我们管理员在下线的时候是不会下自己的OP权限的，方便下次登录就能直接运用权限。<br>
这会有一个隐患，你(管理员)的账号密码有可能会被攻破，不管是暴力破解、熟人作案、黑客撞库等等，只要你的密码被破解了，拿到你密码的玩家想干什么就干什么。</p> <p>当然，游戏肯定是要为登录方便而设置密码，要是实在不放心，你可以随机生成密码，然后用密码管理mod来自动登录。不过这又有了另一个隐患，你不能把你的客户端发给任何人，否则他们会知道你的密码。</p> <p>最好的方法，也是目前我在使用的方法，就是二步验证(2FA)。</p> <p>很多登录插件都支持二步验证，AuthMeReloaded 也支持，你只需要在你的手机或者电脑安装一个二步验证软件，然后在登录插件添加二步验证即可。<br>
每次登录，你都需要输入来自二步验证软件的六位验证码才能成功登录，即使别人知道你的密码也无法成功登录你的游戏账户。</p> <h2 id="玩家账号安全"><a href="#玩家账号安全" class="header-anchor">#</a> 玩家账号安全</h2> <p>写一点教程，推荐但不强制玩家做 绑定邮箱、添加二步验证 等以增加账号安全等级。<br>
但是，二步验证在玩家中有利有弊，弊端就是玩家的二步验证软件数据丢了以后，只能找管理员找回账号。</p> <p>另外，开服期间注意到了一个现象，有的人会用软件强行霸占其它玩家的账号，不让号主登录，来做到软封禁的效果。<br>
软件因为登录超时未输入密码而被踢出后，会立即重新登录，避免其它人上号。<br>
为了避免这种情况的出现，我给我服务器的QQ机器人添加了一个功能，自助封禁自己账号的IP地址。<br>
我服务器的QQ机器人可以绑定自己的游戏账号到QQ号，所以想到可以这么做来避免上述情况的发生，只要有人敢这么做，那号主就可以封禁肇事者的 IP 地址，而不需要向管理员求助。</p> <h2 id="内容审查安全"><a href="#内容审查安全" class="header-anchor">#</a> 内容审查安全</h2> <p>一般来说，Minecraft 服务器是几乎不会有多少内容审查限制的。从大的来说，绝对不能碰的是涉政和涉黄，关于人身攻击以及其它的一些细则，则由各服务器自行规定。</p> <p>你服务器的对头，或者想要打击报复服务器的玩家，通常会选择开小号在聊天里刷涉政和涉黄话题，作为管理员，你不一定能够24小时在线去管你的服务器聊天栏。</p> <p>对这些功能设置一点门槛可能会有所帮助。比如我服务器就需要绑定QQ号或者进行正版验证，才能在聊天栏发送消息。对于想要游玩这个服务器的新人也相对友好，要么加群绑定QQ号，要么使用正版账号验证，都不是特别难的事。</p> <h2 id="管理员权限安全"><a href="#管理员权限安全" class="header-anchor">#</a> 管理员权限安全</h2> <p>我们通常是使用命令来做各个插件之间的互联互通。但是，从很久以前，就有一个非常不好的习惯。</p> <p>那就是：使用OP权限(管理员权限)执行。</p> <p><strong>永远都不要这么做！</strong></p> <p>使用OP权限执行命令的原理如下</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>在玩家有OP权限时:
执行命令

在玩家没有OP权限时:
给予玩家OP权限 -&gt; 执行命令 -&gt; 还原玩家OP权限状态
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>最要命的就是<code>给予玩家OP权限</code>和<code>还原玩家OP权限状态</code>这两步。</p> <p>这两步会在设置权限之后进行 IO 操作 (文件输入/输出操作)，将 OP 权限状态写入 <code>ops.json</code> 里。<br>
进行 IO 操作是相当耗时的，在高频执行时甚至会影响服务器性能。</p> <p>这还没完，如果玩家发现了某个操作是通过“使用OP权限执行”的，他们可以通过脚本，一边执行这个操作一边执行一条命令，来卡出OP权限。<br>
此事在<a href="https://www.bilibili.com/video/BV1ni4y1N7Ex/" target="_blank" rel="noopener noreferrer">二周目已经关服的生存都市亦有记载<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，
只不过当时该武器修改物品lore (切换形态) 时没给OP权限，而是给的lore插件权限 (注意视频中的 <code>[GroupManagerLP]</code> 提示)，不然真的能卡出OP来。<br>
除了这种异步执行的方式，还能通过崩服bug，试图在“还原玩家OP权限状态”这一步，OP权限还没写进 <code>ops.json</code> 时让服务器崩溃，导致OP权限状态保留。</p> <p>以上两种卡OP方法都非常依靠时机，虽然难，但是可行。</p> <p>所以，绝对不要在你的服务器中使用“OP权限执行”这个功能，即使插件提供了这个功能。<br>
我可以这么说，<strong>没有任何插件</strong>的这个功能是安全的。而且这个功能还会造成额外的性能损耗。</p> <p>使用控制台权限执行不需要写入OP权限状态，不仅安全，性能还比使用OP权限执行更高。</p> <h2 id="插件安全"><a href="#插件安全" class="header-anchor">#</a> 插件安全</h2> <p>不要使用任何来源不明的插件，包括刚发布不久的、低下载量的、玩家给你的、闭源的，甚至是付费插件。<br>
开源插件基本可信，只要不是用小号发的，基本不会有后门，除非作者在网上的名声不想要了。<br>
服务器管理团队里最好要有一名懂得编程的技术，在安装插件之前做简单的后门排查。<br>
除非有必要（比如漏洞修复、新增自己需要的功能什么的），特别是闭源的免费或付费插件，只要能用就尽量不更新插件，以免上游投毒。</p> <h2 id="尾声"><a href="#尾声" class="header-anchor">#</a> 尾声</h2> <p>我的网安老师跟我们说过，最好的安全措施，是即使你公开了出来也无法或难以破解的。<br>
欢迎各位读者借鉴我的方案，或者从我的方案中寻找漏洞、加以改进。</p></div></div>  <div class="page-edit"><div class="edit-link"><a href="https://github.com/MrXiaoM/blog/edit/main/docs/_posts/mc-cyber-security.md" target="_blank" rel="noopener noreferrer">编辑</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="tags"><a href="/tags/?tag=%E7%BD%91%E7%BB%9C" title="标签">#网络</a></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2025/01/13, 14:49:11</span></div></div> <div class="page-nav-wapper"><!----> <!----></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/bukkit/get-started/"><div>
            Bukkit开发教程/入门指南
            <!----></div></a> <span class="date">01-13</span></dt></dl><dl><dd>02</dd> <dt><a href="/inst/"><div>
            互联网实例
            <!----></div></a> <span class="date"></span></dt></dl><dl><dd>03</dd> <dt><a href="/post/build-libcurl/"><div>
            Windows 下编译 libcurl 全流程
            <!----></div></a> <span class="date">11-09</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer">
  Theme fork from
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2018-2025
    <span><a href="https://www.mrxiaom.top">人间工作P</a> | <a href="/friends">友情链接</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.8383ec1a.js" defer></script><script src="/assets/js/2.1586014b.js" defer></script><script src="/assets/js/17.9a097336.js" defer></script>
  </body>
</html>
